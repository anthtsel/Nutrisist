{% extends "base.html" %}

{% block title %}Profile{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-8 offset-md-2">
        <!-- Basic Information Card -->
        <div class="card mb-4">
            <div class="card-header">
                <h3>Basic Information</h3>
            </div>
            <div class="card-body">
                <div class="row mb-3">
                    <div class="col-sm-3">
                        <strong>Username:</strong>
                    </div>
                    <div class="col-sm-9">
                        {{ user.username }}
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-sm-3">
                        <strong>Email:</strong>
                    </div>
                    <div class="col-sm-9">
                        {{ user.email }}
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <a href="{{ url_for('user.edit_profile') }}" class="btn btn-primary">Edit Profile</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Health Information Card -->
        <div class="card mb-4">
            <div class="card-header">
                <h3>Health Information</h3>
            </div>
            <div class="card-body">
                <div class="row mb-3">
                    <div class="col-sm-3">
                        <strong>Age:</strong>
                    </div>
                    <div class="col-sm-9">
                        {{ user.age if user.age else 'Not set' }}
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-sm-3">
                        <strong>Gender:</strong>
                    </div>
                    <div class="col-sm-9">
                        {{ user.gender if user.gender else 'Not set' }}
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-sm-3">
                        <strong>Height:</strong>
                    </div>
                    <div class="col-sm-9">
                        {{ user.height if user.height else 'Not set' }} cm
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-sm-3">
                        <strong>Weight:</strong>
                    </div>
                    <div class="col-sm-9">
                        {{ user.weight if user.weight else 'Not set' }} kg
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-sm-3">
                        <strong>BMI:</strong>
                    </div>
                    <div class="col-sm-9">
                        {% if user.calculate_bmi() %}
                            {{ user.calculate_bmi() }} ({{ user.get_bmi_category() }})
                        {% else %}
                            Not set
                        {% endif %}
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-sm-3">
                        <strong>Activity Level:</strong>
                    </div>
                    <div class="col-sm-9">
                        {{ user.activity_level if user.activity_level else 'Not set' }}
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-sm-3">
                        <strong>Health Goals:</strong>
                    </div>
                    <div class="col-sm-9">
                        {{ user.health_goals if user.health_goals else 'Not set' }}
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <a href="{{ url_for('user.edit_health_info') }}" class="btn btn-primary">Edit Health Information</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Latest Health Metrics Card -->
        <div class="card">
            <div class="card-header">
                <h3>Latest Health Metrics</h3>
            </div>
            <div class="card-body">
                {% if user.health_metrics %}
                    {% set latest_metric = user.health_metrics[-1] %}
                    <div class="row mb-3">
                        <div class="col-sm-3">
                            <strong>Date:</strong>
                        </div>
                        <div class="col-sm-9">
                            {{ latest_metric.date.strftime('%Y-%m-%d') }}
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-3">
                            <strong>Weight:</strong>
                        </div>
                        <div class="col-sm-9">
                            {{ latest_metric.weight }} kg
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-3">
                            <strong>Body Fat:</strong>
                        </div>
                        <div class="col-sm-9">
                            {{ latest_metric.body_fat_percentage }}%
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-3">
                            <strong>Muscle Mass:</strong>
                        </div>
                        <div class="col-sm-9">
                            {{ latest_metric.muscle_mass_percentage }}%
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-sm-3">
                            <strong>BMI:</strong>
                        </div>
                        <div class="col-sm-9">
                            {{ latest_metric.bmi }}
                        </div>
                    </div>
                {% else %}
                    <p>No health metrics recorded yet.</p>
                {% endif %}
                <div class="row">
                    <div class="col-12">
                        <a href="{{ url_for('user.health_metrics') }}" class="btn btn-primary">View All Metrics</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 